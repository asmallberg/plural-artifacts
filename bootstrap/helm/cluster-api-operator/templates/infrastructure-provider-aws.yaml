{{- if .Values.infrastructureProvider.aws.enabled -}}
apiVersion: operator.cluster.x-k8s.io/v1alpha1
kind: InfrastructureProvider
metadata:
  name: aws
spec:
  deployment:
    containers:
      - args:
          awscluster-concurrency: '12'
          awsmachine-concurrency: '11'
        name: manager
  manager:
    health: {}
    metrics: {}
    syncPeriod: 30s
    verbosity: 1
    webhook: {}
  secretName: {{ include "cluster-api-operator-plural.secretName" . }}
  version: {{ .Values.infrastructureProvider.aws.version }}
{{- end }}
