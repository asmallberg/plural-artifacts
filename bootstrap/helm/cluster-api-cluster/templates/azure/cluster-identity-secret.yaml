{{- if and (eq .Values.provider "azure") (eq .Values.type "managed") .Values.cluster.azure.clientSecret .Values.cluster.azure.clientSecretName -}}
kind: Secret
apiVersion: v1
metadata:
  name: {{ .Values.cluster.azure.clientSecretName }}
  labels:
    clusterctl.cluster.x-k8s.io/move-hierarchy: "true"
type: Opaque
data:
  clientSecret: {{ .Values.cluster.azure.clientSecret | b64enc | quote }}
{{- end }}
